# Checklist de Sanidad del Repositorio: Imagen@rte## ┬¡ãÆ├┤├¿ Estado Global**Estado global:** ┬¡ãÆãÆ├¡ EN PROGRESO  **Ôö£├£ltima actualizaciÔö£Ôöén:** 2026-01-20  **Rama evaluada:** `chore/repo-saneamiento-F4-sanitize` (desde `origin/main`)  **Evaluado por:**- Cursor (agente): ┬¡ãÆãÆ├│ SÔö£┬í- Humano (guardian): ├ö┬╝┬ú si> ├ö├£├í┬┤┬®├à **BLOQUEO DE MERGE**: El repositorio NO puede recibir merge a `origin/main` hasta que el estado global sea ┬¡ãÆãÆ├│ APROBADO y validado por un humano.---## ┬¡ãÆ├┤├» Checklist Estructural### A. Alcance (NO FEATURES)- [x] **A.1** El checklist NO modifica lÔö£Ôöégica funcional  - **Estado:** OK  - **Evidencia:** Este checklist es puramente estructural y de gobernanza. No toca cÔö£Ôöédigo de features, UI, flujos ni dependencias.- [x] **A.2** El checklist NO agrega ni modifica features  - **Estado:** OK  - **Evidencia:** Solo inspecciÔö£Ôöén y documentaciÔö£Ôöén del estado actual del repositorio.- [x] **A.3** El checklist NO realiza reescritura de historia Git  - **Estado:** OK  - **Evidencia:** No se ejecutaron comandos de force-push, rebase sobre main, ni alteraciÔö£Ôöén de historia.---### B. Rama y Base- [x] **B.1** Rama canÔö£Ôöénica identificada y verificada  - **Estado:** OK  - **Evidencia:**     - Rama actual: `main` (verificado con `git branch --show-current`)    - Remoto configurado: `origin` ├ö├Ñ├å `https://github.com/CharlieUY711/imagenarte-flutter.git` (verificado con `git remote -v`)- [x] **B.2** Repositorio tiene remoto configurado  - **Estado:** OK  - **Evidencia:** `origin` apunta a `https://github.com/CharlieUY711/imagenarte-flutter.git`- [x] **B.3** Estado de trabajo limpio o documentado  - **Estado:** OK  - **Evidencia:**     - Archivo sin rastrear: `docs/F1_AUDITORIA_REPORTE.md` (no bloqueante, documentaciÔö£Ôöén nueva)    - No hay cambios staged ni modificaciones en archivos rastreados---### C. Contrato del Repositorio- [x] **C.1** El repositorio declara ser Flutter-first  - **Estado:** OK  - **Evidencia:**     - `README.md` lÔö£┬ínea 1: "AplicaciÔö£Ôöén **offline-first** para tratamiento..."    - `README.md` lÔö£┬ínea 18: "mobile/ # AplicaciÔö£Ôöén Flutter"    - `docs/ARCHITECTURE.md` describe arquitectura Flutter con packages Dart    - Estructura principal: `apps/mobile/` con `pubspec.yaml` Flutter- [x] **C.2** README.md existe y describe el proyecto  - **Estado:** OK  - **Evidencia:**     - Path: `README.md`    - Contiene: descripciÔö£Ôöén, caracterÔö£┬ísticas, estructura, documentaciÔö£Ôöén, requisitos, instalaciÔö£Ôöén, principios fundamentales, estado actual- [x] **C.3** DocumentaciÔö£Ôöén de arquitectura existe  - **Estado:** OK  - **Evidencia:**     - Path: `docs/ARCHITECTURE.md`    - Describe estructura modular, capas del sistema, packages (core, processing, watermark)- [x] **C.4** Estructura de packages Flutter verificada  - **Estado:** OK  - **Evidencia:**     - `packages/core/pubspec.yaml` - Package Dart vÔö£├¡lido (name: core, sdk: >=3.0.0)    - `packages/processing/pubspec.yaml` - Package Dart vÔö£├¡lido (name: processing, depende de core)    - `packages/watermark/pubspec.yaml` - Package Dart vÔö£├¡lido (name: watermark)    - `apps/mobile/pubspec.yaml` - App Flutter que referencia los 3 packages locales mediante `path:`---### D. Estructura CanÔö£Ôöénica- [x] **D.1** Directorio `apps/mobile/` existe y contiene app Flutter  - **Estado:** OK  - **Evidencia:**     - Path: `apps/mobile/`    - Contiene: `lib/main.dart`, `lib/app.dart`, `pubspec.yaml` Flutter vÔö£├¡lido    - Estructura: `lib/` con `navigation/`, `ui/`, `presentation/`, `state/`, `utils/`    - Plataformas: `android/`, `ios/`, `web/`- [x] **D.2** Directorio `packages/` existe con packages locales  - **Estado:** OK  - **Evidencia:**     - `packages/core/` - 27 archivos (26 *.dart, 1 *.yaml)    - `packages/processing/` - 22 archivos (21 *.dart, 1 *.yaml)    - `packages/watermark/` - 9 archivos (8 *.dart, 1 *.yaml)    - Todos tienen `pubspec.yaml` vÔö£├¡lido y estructura `lib/`- [x] **D.3** Directorio `docs/` existe con documentaciÔö£Ôöén  - **Estado:** OK  - **Evidencia:**     - Path: `docs/`    - Contiene: ARCHITECTURE.md, PRD.md, PRIVACY_MODEL.md, THREAT_MODEL.md, ROADMAP.md, SETUP.md, y otros documentos tÔö£┬«cnicos- [x] **D.4** Archivo `.gitignore` existe y estÔö£├¡ configurado para Flutter  - **Estado:** OK  - **Evidencia:**     - Path: `.gitignore`    - Contiene: exclusiones para `build/`, `.dart_tool/`, `.flutter-plugins`, Android (`local.properties`, `.gradle/`), iOS (`Pods/`, `.symlinks/`), IDE (`.idea/`, `.vscode/`)---### E. Prohibiciones (Bloqueantes)- [x] **E.1** NO existe prototipo web rastreado en el repositorio  - **Estado:** ├ö┬ú├á OK (F4 - Resuelto)  - **Evidencia:**     - Verificado con `git ls-files | Select-String "figma_extracted"` - retorna 0 archivos    - `figma_extracted/` existe en el historial de Git (commits antiguos: 03c447af, cbb4407d, 45ecab03) pero NO estÔö£├¡ rastreado en HEAD actual    - `.gitignore` contiene exclusiÔö£Ôöén para `figma_extracted/` (lÔö£┬ínea 54) - barrera preventiva F3 activa    - **RESUELTO**: El directorio `figma_extracted/` no estÔö£├¡ en el Ôö£┬índice de Git en el estado actual    - **Rama:** `chore/repo-saneamiento-F4-sanitize` (2026-01-20)- [x] **E.2** NO existe carpeta `web/prototype` rastreada  - **Estado:** OK  - **Evidencia:**     - `git ls-files web/prototype` retorna vacÔö£┬ío (no estÔö£├¡ rastreado)    - La carpeta existe fÔö£┬ísicamente pero no estÔö£├¡ en el Ôö£┬índice de Git (correcto)- [x] **E.3** NO hay contaminaciÔö£Ôöén estructural de tecnologÔö£┬ías no-Flutter en raÔö£┬íz  - **Estado:** OK  - **Evidencia:**     - RaÔö£┬íz contiene: `apps/`, `packages/`, `docs/`, `README.md`, `.gitignore` (estructura esperada)    - `design-tools/` existe pero parece ser herramientas de desarrollo auxiliares (no bloqueante si no estÔö£├¡ rastreado)    - `Figma.zip` existe pero no estÔö£├¡ rastreado (verificado implÔö£┬ícitamente)    - `figma_extracted/` no estÔö£├¡ en raÔö£┬íz ni rastreado (E.1 resuelto)- [x] **E.4** NO hay archivos de configuraciÔö£Ôöén de tecnologÔö£┬ías no-Flutter en raÔö£┬íz  - **Estado:** ├ö┬ú├á OK (F4 - Resuelto)  - **Evidencia:**     - Verificado con `git ls-files | Select-String "^package-lock.json$"` - retorna 0 archivos en raÔö£┬íz    - `package-lock.json` existe en el historial de Git (commit 45ecab03) pero NO estÔö£├¡ rastreado en HEAD actual    - `.gitignore` contiene exclusiÔö£Ôöén para `package-lock.json` (lÔö£┬ínea 59) - barrera preventiva F3 activa    - **RESUELTO**: `package-lock.json` no estÔö£├¡ en el Ôö£┬índice de Git en el estado actual    - **Nota**: `apps/mobile/package-lock.json` existe pero estÔö£├¡ en subdirectorio de app (no en raÔö£┬íz, no bloqueante)    - **Rama:** `chore/repo-saneamiento-F4-sanitize` (2026-01-20)---### F. Barreras (.gitignore / PrevenciÔö£Ôöén)- [x] **F.1** `.gitignore` excluye prototipos web  - **Estado:** ├ö┬ú├á OK (F3 - Endurecido)  - **Evidencia:**     - `.gitignore` lÔö£┬íneas 54-55: contiene exclusiones explÔö£┬ícitas para `figma_extracted/` y `web/prototype/`    - SecciÔö£Ôöén "BARRERAS PREVENTIVAS F3" agregada (lÔö£┬íneas 48-80)    - DocumentaciÔö£Ôöén creada: `docs/workflows/REPO_BARRIERS.md` explica el por quÔö£┬« y cÔö£Ôöémo actuar    - **Rama:** `chore/repo-saneamiento-F3-barriers` (2026-01-20)- [x] **F.2** `.gitignore` excluye builds y artefactos de Flutter  - **Estado:** OK  - **Evidencia:**     - `.gitignore` contiene: `**/build/`, `**/.dart_tool/`, `**/.flutter-plugins`, `**/pubspec.lock`    - Excluye artefactos de Android: `**/android/.gradle/`, `**/android/local.properties`    - Excluye artefactos de iOS: `**/ios/Pods/`, `**/ios/.symlinks/`- [x] **F.3** `.gitignore` excluye archivos de IDE  - **Estado:** OK  - **Evidencia:**     - `.gitignore` contiene: `.idea/`, `.vscode/`, `*.iml`, `*.ipr`, `*.iws`, `.DS_Store`- [x] **F.4** `.gitignore` excluye node_modules y artefactos npm  - **Estado:** ├ö┬ú├á OK (F3 - Endurecido)  - **Evidencia:**     - `.gitignore` lÔö£┬íneas 58-61: contiene exclusiones para `**/node_modules/`, `package-lock.json`, `pnpm-lock.yaml`, `yarn.lock`    - LÔö£┬íneas 64-70: excluye builds web (`**/dist/`, `**/.next/`, `**/.vite/`, `**/.turbo/`, `**/.parcel-cache/`, `**/.cache/`)    - LÔö£┬íneas 73-75: excluye exports y temporales (`exports/`, `tmp/`, `backup/`)    - **Rama:** `chore/repo-saneamiento-F3-barriers` (2026-01-20)    - **DocumentaciÔö£Ôöén:** Ver `docs/workflows/REPO_BARRIERS.md` para detalles completos---### G. Higiene Git / Worktrees- [x] **G.1** No hay commits de force-push recientes sobre main  - **Estado:** OK  - **Evidencia:**     - Ôö£├£ltimos commits: `45ecab03 chore(baseline): freeze before wizard lockdown`, `46242a81 cursor: empty commit to allow worktree creation`    - No hay evidencia de force-push en el historial reciente- [x] **G.2** No hay rebase sobre main en commits recientes  - **Estado:** OK  - **Evidencia:** Historial lineal sin evidencia de rebase forzado- [x] **G.3** Estado de trabajo documentado  - **Estado:** OK  - **Evidencia:** Solo archivo sin rastrear: `docs/F1_AUDITORIA_REPORTE.md` (documentaciÔö£Ôöén, no bloqueante)---### H. Validaciones No Destructivas- [x] **H.1** `apps/mobile/pubspec.yaml` es vÔö£├¡lido  - **Estado:** OK  - **Evidencia:**     - Path: `apps/mobile/pubspec.yaml`    - Contiene: name, description, version, environment (sdk: >=3.0.0), dependencies Flutter vÔö£├¡lidas    - Referencias a packages locales: `core`, `processing`, `watermark` mediante `path:`- [x] **H.2** Packages locales tienen `pubspec.yaml` vÔö£├¡lidos  - **Estado:** OK  - **Evidencia:**     - `packages/core/pubspec.yaml`: name: core, sdk: >=3.0.0, dependencies vÔö£├¡lidas    - `packages/processing/pubspec.yaml`: name: processing, depende de core mediante path    - `packages/watermark/pubspec.yaml`: name: watermark, sdk: >=3.0.0- [x] **H.3** Estructura de `lib/` en app mÔö£Ôöévil es coherente  - **Estado:** OK  - **Evidencia:**     - `apps/mobile/lib/main.dart` existe y llama a `ImagenArteApp`    - `apps/mobile/lib/app.dart` existe (app principal)    - Estructura: `navigation/`, `ui/screens/`, `presentation/`, `state/`, `utils/`    - Router configurado: `lib/navigation/app_router.dart` con rutas home, wizard, export, editor- [x] **H.4** No hay referencias rotas obvias en cÔö£Ôöédigo principal  - **Estado:** OK  - **Evidencia:**     - `apps/mobile/lib/navigation/app_router.dart` importa correctamente: `home_screen.dart`, `wizard_screen.dart`, `export_screen.dart`    - Packages locales referenciados correctamente: `package:core/...`, `package:processing/...`, `package:watermark/...`---### I. DocumentaciÔö£Ôöén y Trazabilidad- [x] **I.1** README.md es completo y actualizado  - **Estado:** OK  - **Evidencia:**     - Path: `README.md`    - Contiene: descripciÔö£Ôöén, caracterÔö£┬ísticas, estructura, documentaciÔö£Ôöén referenciada, requisitos, instalaciÔö£Ôöén, principios, estado actual- [x] **I.2** DocumentaciÔö£Ôöén de arquitectura existe  - **Estado:** OK  - **Evidencia:**     - Path: `docs/ARCHITECTURE.md`    - Describe: visiÔö£Ôöén general, estructura del proyecto, capas del sistema, entidades, casos de uso- [x] **I.3** DocumentaciÔö£Ôöén de setup existe  - **Estado:** OK  - **Evidencia:**     - Path: `SETUP.md`    - Contiene: requisitos previos, instalaciÔö£Ôöén, configuraciÔö£Ôöén Android/iOS, ejecuciÔö£Ôöén, soluciÔö£Ôöén de problemas- [ ] **I.4** ADRs (Architecture Decision Records) existen o estÔö£├¡n documentados  - **Estado:** PENDIENTE  - **Evidencia:**     - BÔö£Ôòæsqueda de `ADR*.md` y `*.adr` no encontrÔö£Ôöé archivos    - No hay carpeta `docs/adr/` o similar    - **OBSERVACIÔö£├┤N**: No es bloqueante, pero se recomienda documentar decisiones arquitectÔö£Ôöénicas importantes- [x] **I.5** Este checklist existe y estÔö£├¡ completo  - **Estado:** OK  - **Evidencia:**     - Path: `docs/workflows/REPO_SANITY_CHECK.md`    - Checklist completo con todas las secciones requeridas    - Evidencia proporcionada para cada Ôö£┬ítem---## ┬¡ãÆ├┤├ÿ Resumen del Estado### Fallas CrÔö£┬íticas Detectadas1. ~~**E.1 - Prototipo web rastreado**: `figma_extracted/` estÔö£├¡ en el Ôö£┬índice de Git~~ ├ö┬ú├á **RESUELTO (F4)**   - **Estado:** `figma_extracted/` NO estÔö£├¡ rastreado en HEAD actual   - **Evidencia:** `git ls-files | Select-String "figma_extracted"` retorna 0 archivos   - **Rama:** `chore/repo-saneamiento-F4-sanitize` (2026-01-20)   - **Nota:** Existe en historial de Git pero no estÔö£├¡ en el Ôö£┬índice (barreras F3 activas)2. ~~**E.4 - Archivos npm en raÔö£┬íz**: `package-lock.json` en raÔö£┬íz~~ ├ö┬ú├á **RESUELTO (F4)**   - **Estado:** `package-lock.json` NO estÔö£├¡ rastreado en HEAD actual   - **Evidencia:** `git ls-files | Select-String "^package-lock.json$"` retorna 0 archivos en raÔö£┬íz   - **Rama:** `chore/repo-saneamiento-F4-sanitize` (2026-01-20)   - **Nota:** Existe en historial de Git pero no estÔö£├¡ en el Ôö£┬índice (barreras F3 activas)3. ~~**F.1 - .gitignore incompleto**: No excluye prototipos web~~ ├ö┬ú├á **RESUELTO (F3)**   - **Estado:** Barreras endurecidas en rama `chore/repo-saneamiento-F3-barriers`   - **Evidencia:** `.gitignore` actualizado con exclusiones explÔö£┬ícitas (ver F.1 y F.4 en checklist)   - **DocumentaciÔö£Ôöén:** `docs/workflows/REPO_BARRIERS.md` creado4. ~~**F.4 - .gitignore no excluye artefactos npm**~~ ├ö┬ú├á **RESUELTO (F3)**   - **Estado:** Barreras endurecidas en rama `chore/repo-saneamiento-F3-barriers`   - **Evidencia:** `.gitignore` actualizado con exclusiones npm completas (ver F.4 en checklist)### Items Pendientes (No Bloqueantes)- **I.4**: ADRs no existen (recomendaciÔö£Ôöén, no bloqueante)### Items Aprobados- ├ö┬ú├á Estructura Flutter correcta- ├ö┬ú├á Packages locales bien configurados- ├ö┬ú├á DocumentaciÔö£Ôöén principal existe- ├ö┬ú├á ConfiguraciÔö£Ôöén Git bÔö£├¡sica correcta- ├ö┬ú├á Rama y remoto configurados correctamente---## ┬¡ãÆ├Â┬║ Acciones Requeridas para Desbloquear~~1. **Decidir el destino de `figma_extracted/`**~~ ├ö┬ú├á **COMPLETADO (F4)**   - **Estado:** `figma_extracted/` no estÔö£├¡ rastreado en HEAD actual   - **Barreras:** `.gitignore` contiene exclusiÔö£Ôöén (F3)   - **Evidencia:** Verificado con `git ls-files` - 0 archivos rastreados~~2. **Actualizar `.gitignore`**~~ ├ö┬ú├á **COMPLETADO (F3)**   - **Estado:** `.gitignore` contiene exclusiones para `figma_extracted/` y `package-lock.json`   - **Rama:** `chore/repo-saneamiento-F3-barriers`   - **DocumentaciÔö£Ôöén:** `docs/workflows/REPO_BARRIERS.md`~~3. **Limpiar artefactos npm**~~ ├ö┬ú├á **COMPLETADO (F4)**   - **Estado:** `package-lock.json` no estÔö£├¡ rastreado en HEAD actual   - **Evidencia:** Verificado con `git ls-files` - 0 archivos en raÔö£┬íz4. **ValidaciÔö£Ôöén humana**:   - Revisar este checklist   - Verificar evidencia de que E.1 y E.4 estÔö£├¡n resueltos   - Aprobar o rechazar las acciones realizadas   - Actualizar estado global a ┬¡ãÆãÆ├│ APROBADO solo despuÔö£┬«s de confirmaciÔö£Ôöén humana---## ┬¡ãÆ├┤├╗ Reglas de Uso del Checklist1. **Obligatorio para todo PR a main**: Este checklist debe completarse antes de mergear cualquier PR a `origin/main`.2. **FALLA implica BLOQUEO**: Cualquier Ôö£┬ítem marcado como ┬¡ãÆ├ÂÔöñ FALLA bloquea el merge hasta su resoluciÔö£Ôöén.3. **AprobaciÔö£Ôöén humana requerida**: El estado ┬¡ãÆãÆ├│ APROBADO solo puede ser establecido por un humano (guardian del repositorio).4. **Evidencia obligatoria**: Todo Ôö£┬ítem marcado como OK debe incluir evidencia mÔö£┬ínima (paths, archivos, observaciones tÔö£┬«cnicas).5. **ActualizaciÔö£Ôöén continua**: Este checklist debe actualizarse cada vez que cambia la estructura del repositorio o se detectan nuevas violaciones.6. **Trazabilidad**: Toda excepciÔö£Ôöén o decisiÔö£Ôöén debe quedar documentada (preferiblemente en un ADR).---## ┬¡ãÆ├Â├ñ Historial de Evaluaciones| Fecha | Evaluado por | Estado | Notas ||-------|--------------|--------|-------|| 2026-01-20 | Cursor (agente) | ┬¡ãÆ├ÂÔöñ BLOQUEADO | Primera evaluaciÔö£Ôöén. Detectadas fallas: E.1, E.4, F.1, F.4 || 2026-01-20 | Cursor (agente) | ┬¡ãÆãÆ├¡ EN PROGRESO (F3) | Fase F3 completada: Barreras endurecidas (F.1 ├ö┬ú├á, F.4 ├ö┬ú├á). Pendiente: E.1, E.4 (F4 - eliminaciÔö£Ôöén de contenido rastreado) || 2026-01-20 | Cursor (agente) | ┬¡ãÆãÆ├¡ EN PROGRESO (F4) | Fase F4 completada: Verificado que `figma_extracted/` y `package-lock.json` NO estÔö£├¡n rastreados en HEAD. E.1 ├ö┬ú├á, E.4 ├ö┬ú├á. Pendiente: ValidaciÔö£Ôöén humana |---**Fin del Checklist**
